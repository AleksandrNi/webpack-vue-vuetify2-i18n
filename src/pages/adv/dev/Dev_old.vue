<template>
<div class='horizontalSlidingContainer'>
    <div class="testContent">
        <h1>Title</h1>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi, ducimus. Iure, alias quibusdam placeat voluptatibus nostrum fugiat delectus labore nam impedit atque commodi aperiam hic ipsum blanditiis. Tenetur, maxime ex.</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi, ducimus. Iure, alias quibusdam placeat voluptatibus nostrum fugiat delectus labore nam impedit atque commodi aperiam hic ipsum blanditiis. Tenetur, maxime ex.</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi, ducimus. Iure, alias quibusdam placeat voluptatibus nostrum fugiat delectus labore nam impedit atque commodi aperiam hic ipsum blanditiis. Tenetur, maxime ex.</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi, ducimus. Iure, alias quibusdam placeat voluptatibus nostrum fugiat delectus labore nam impedit atque commodi aperiam hic ipsum blanditiis. Tenetur, maxime ex.</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi, ducimus. Iure, alias quibusdam placeat voluptatibus nostrum fugiat delectus labore nam impedit atque commodi aperiam hic ipsum blanditiis. Tenetur, maxime ex.</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi, ducimus. Iure, alias quibusdam placeat voluptatibus nostrum fugiat delectus labore nam impedit atque commodi aperiam hic ipsum blanditiis. Tenetur, maxime ex.</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi, ducimus. Iure, alias quibusdam placeat voluptatibus nostrum fugiat delectus labore nam impedit atque commodi aperiam hic ipsum blanditiis. Tenetur, maxime ex.</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi, ducimus. Iure, alias quibusdam placeat voluptatibus nostrum fugiat delectus labore nam impedit atque commodi aperiam hic ipsum blanditiis. Tenetur, maxime ex.</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi, ducimus. Iure, alias quibusdam placeat voluptatibus nostrum fugiat delectus labore nam impedit atque commodi aperiam hic ipsum blanditiis. Tenetur, maxime ex.</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi, ducimus. Iure, alias quibusdam placeat voluptatibus nostrum fugiat delectus labore nam impedit atque commodi aperiam hic ipsum blanditiis. Tenetur, maxime ex.</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi, ducimus. Iure, alias quibusdam placeat voluptatibus nostrum fugiat delectus labore nam impedit atque commodi aperiam hic ipsum blanditiis. Tenetur, maxime ex.</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi, ducimus. Iure, alias quibusdam placeat voluptatibus nostrum fugiat delectus labore nam impedit atque commodi aperiam hic ipsum blanditiis. Tenetur, maxime ex.</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi, ducimus. Iure, alias quibusdam placeat voluptatibus nostrum fugiat delectus labore nam impedit atque commodi aperiam hic ipsum blanditiis. Tenetur, maxime ex.</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Vero necessitatibus ducimus cum. Excepturi facilis quas ipsa corrupti labore suscipit fugit voluptatem! Ipsam placeat illo, inventore molestiae incidunt hic molestias ab.</p>
    </div>
    <div class="slidingContainerWrapper">
        <div class="slidingContainer">
        <div class="squareBlock">1</div>
        <div class="squareBlock">2</div>
        <div class="squareBlock">3</div>
        <div class="squareBlock">4</div>
    </div>
    </div>
    <!-- <div class='bottom'>
        <div class="squareBlock">1</div>
        <div class="squareBlock">2</div>
        <div class="squareBlock">3</div>
    </div> -->
        <div class="testContent">
        <h1>Title</h1>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi, ducimus. Iure, alias quibusdam placeat voluptatibus nostrum fugiat delectus labore nam impedit atque commodi aperiam hic ipsum blanditiis. Tenetur, maxime ex.</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi, ducimus. Iure, alias quibusdam placeat voluptatibus nostrum fugiat delectus labore nam impedit atque commodi aperiam hic ipsum blanditiis. Tenetur, maxime ex.</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi, ducimus. Iure, alias quibusdam placeat voluptatibus nostrum fugiat delectus labore nam impedit atque commodi aperiam hic ipsum blanditiis. Tenetur, maxime ex.</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi, ducimus. Iure, alias quibusdam placeat voluptatibus nostrum fugiat delectus labore nam impedit atque commodi aperiam hic ipsum blanditiis. Tenetur, maxime ex.</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi, ducimus. Iure, alias quibusdam placeat voluptatibus nostrum fugiat delectus labore nam impedit atque commodi aperiam hic ipsum blanditiis. Tenetur, maxime ex.</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi, ducimus. Iure, alias quibusdam placeat voluptatibus nostrum fugiat delectus labore nam impedit atque commodi aperiam hic ipsum blanditiis. Tenetur, maxime ex.</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi, ducimus. Iure, alias quibusdam placeat voluptatibus nostrum fugiat delectus labore nam impedit atque commodi aperiam hic ipsum blanditiis. Tenetur, maxime ex.</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi, ducimus. Iure, alias quibusdam placeat voluptatibus nostrum fugiat delectus labore nam impedit atque commodi aperiam hic ipsum blanditiis. Tenetur, maxime ex.</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi, ducimus. Iure, alias quibusdam placeat voluptatibus nostrum fugiat delectus labore nam impedit atque commodi aperiam hic ipsum blanditiis. Tenetur, maxime ex.</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi, ducimus. Iure, alias quibusdam placeat voluptatibus nostrum fugiat delectus labore nam impedit atque commodi aperiam hic ipsum blanditiis. Tenetur, maxime ex.</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi, ducimus. Iure, alias quibusdam placeat voluptatibus nostrum fugiat delectus labore nam impedit atque commodi aperiam hic ipsum blanditiis. Tenetur, maxime ex.</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi, ducimus. Iure, alias quibusdam placeat voluptatibus nostrum fugiat delectus labore nam impedit atque commodi aperiam hic ipsum blanditiis. Tenetur, maxime ex.</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Eligendi, ducimus. Iure, alias quibusdam placeat voluptatibus nostrum fugiat delectus labore nam impedit atque commodi aperiam hic ipsum blanditiis. Tenetur, maxime ex.</p>
        <p>Lorem ipsum dolor sit amet consectetur adipisicing elit. Vero necessitatibus ducimus cum. Excepturi facilis quas ipsa corrupti labore suscipit fugit voluptatem! Ipsam placeat illo, inventore molestiae incidunt hic molestias ab.</p>
    </div>
</div>
    <!-- <div>
       <div  id='first' class="firstDiv">
            <div id='second' @wheel="handleScroll" class='firstDivChild'>
            <p class='square'>1</p>
            <p class='square'>2</p>
            <p class='square'>3</p>
        </div>
       </div>
        <div class='secondDiv'>
            <p class='squareDiv'>1</p>
            <p class='squareDiv'>2</p>
            <p class='squareDiv'>3</p>
        </div>
    </div> -->
    
</template>

<script>
import { log } from 'util';
export default {
    data () {
        return {
            scrollValueForLeftSliding: '',
            slidingContainerOffsetLeft: '',
            slidingContainerOffsetTop: '',
            topPaddingSwitchOnAnimation: '',
            bottomPadding: '',
        }
    },
    methods: {
        handleScroll(event) {
            console.log(event);
            
            event.preventDefault();

            const slidingContainer = document.querySelector('.slidingContainer');
            const scroll = window.scrollY;
            
            // get width of payload sliding container width (span)
            const slidingContainerWidth = slidingContainer.offsetWidth;

            const slidingContainerWrapper = document.querySelector('.slidingContainerWrapper')
            const slidingContainerWrapperOffsetHeight = slidingContainerWrapper.offsetHeight;
            const squareBlockOffsetWidth = document.querySelector('.squareBlock').offsetWidth;
            const squareBlockOffsetHeight = document.querySelector('.squareBlock').offsetHeight;

            // save initialize sliding container top and left values
            if ( !this.slidingContainerOffsetLeft ) {
                this.slidingContainerOffsetLeft = slidingContainer.offsetLeft;
            }
            if ( !this.slidingContainerOffsetTop ) {
                this.slidingContainerOffsetTop = slidingContainer.offsetTop;
            }



            
            if(this.slidingContainerOffsetTop - scroll  - this.topPaddingSwitchOnAnimation >= 0 ) {

                slidingContainer.style.position = 'absolute';
                slidingContainer.style.left =  this.slidingContainerOffsetLeft + 'px'; 
                slidingContainer.style.top =  this.slidingContainerOffsetTop + 'px'; 
            
            } else if ( this.slidingContainerOffsetTop - scroll - this.topPaddingSwitchOnAnimation < 0 && 
                        this.slidingContainerOffsetTop + slidingContainerWrapperOffsetHeight - this.slidingContainerOffsetLeft - squareBlockOffsetWidth - scroll  - this.topPaddingSwitchOnAnimation> 0
            ) {
                console.log('enough');
                
                if ( !this.scrollValueForLeftSliding ) {
                    this.scrollValueForLeftSliding = scroll;
                }               

                slidingContainer.style.position = "fixed";
                slidingContainer.style.top =  this.topPaddingSwitchOnAnimation + 'px'; 
                slidingContainer.style.left = (this.slidingContainerOffsetTop - scroll - this.topPaddingSwitchOnAnimation) + this.slidingContainerOffsetLeft  + 'px'; 

            } else if ( this.slidingContainerOffsetTop + slidingContainerWrapperOffsetHeight - this.slidingContainerOffsetLeft - squareBlockOffsetWidth - scroll - this.topPaddingSwitchOnAnimation  <= 0 ) {
                const currentSlidingContainerOffsetLeft = slidingContainer.style.left;
                console.log(currentSlidingContainerOffsetLeft);
                 
                console.log('after enough');
                
                if ( !this.scrollValueForLeftSliding ) {
                    this.scrollValueForLeftSliding = scroll;
                }               
                console.log(slidingContainer.offsetTop - this.scrollValueForLeftSliding + scroll);
                console.log('======================');
                console.log(slidingContainer.offsetTop);
                console.log(scroll);
                console.log('======================');
                
                slidingContainer.style.position = "fixed";
                slidingContainer.style.top = slidingContainerWrapper.offsetTop + slidingContainerWrapperOffsetHeight - squareBlockOffsetHeight - scroll + 'px'; 
                // slidingContainer.style.left = this.slidingContainerOffsetLeft + this.scrollValueForLeftSliding - scroll + 'px'; 

            } else  {
                console.log('Hello Nothing!');
                
            } 
        },

        initializeMethod (event) {
            
            const slidingContainerWrapper = document.querySelector('.slidingContainerWrapper')
            // set bottom padding to the next block
            this.bottomPadding = 10;
            this.topPaddingSwitchOnAnimation = 150;
            
            slidingContainerWrapper.style.height = slidingContainerWrapper.offsetWidth  + this.bottomPadding + this.topPaddingSwitchOnAnimation -130 + 'px';
            
        }
    },
    mounted () {
        window.addEventListener('scroll', this.handleScroll);
        // window.addEventListener('wheel', this.handleScroll);
        window.addEventListener('load', this.initializeMethod)
    },
    destroyed () {
        window.removeEventListener('scroll', this.handleScroll);
        window.addEventListener('load', this.initializeMethod)
    }
}
</script>
<style scoped>
.horizontalSlidingContainer {
    overflow:hidden;
}
.slidingContainer {
    border-width: 2px;
    border-color: blue;
    border-style: solid;
    display: flex;
}
.slidingContainer .squareBlock {
    justify-content: start;
    align-content: space-around;
    height: 300px;
    width: 300px;
    background-color: tomato;
    margin: 1px;
}

.bottom {
    border-width: 2px;
    border-color: blueviolet;  
    border-style: solid;
    display: flex;
}
.bottom .squareBlock {
    justify-content: start;
    align-content: space-around;
    height: 300px;
    width: 300px;
    background-color: blanchedalmond;
    margin: 1px;
}

.testContent {
    text-align: left;
    padding: 10px;
}


/* #first {
    overflow:hidden;
    height:550;
}
#second {
    width:9000px;
    height: 320px;
}
#second p {
    float:left;
}
.square {
    width: 500px;
    height: 500px;
    background-color: tomato;
    margin: 0 1px;
}
.secondDiv {
    height: 500px;
    margin-top: 1930px;
}
.firstDiv {
    position: relative;
}
.firstDivChild {

    border-color: black;
    border-width: 5px;
}

.squareDiv {
    width: 500px;
    height: 500px;
    background-color: green;
} */
</style>
